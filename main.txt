-- GlassUI Library - Main Module
-- Thư viện UI với hiệu ứng glass morphism cho Roblox

local GlassUI = {}
GlassUI.__index = GlassUI

-- Import các module con
local Utils = require(script.Utils)
local Theme = require(script.Theme)
local Components = require(script.Components)
local Background = require(script.Background)

-- Khởi tạo thư viện
function GlassUI.new(parent)
    local self = setmetatable({}, GlassUI)
    
    -- Parent là nơi sẽ chứa UI (thường là PlayerGui)
    self.parent = parent or game.Players.LocalPlayer:WaitForChild("PlayerGui")
    self.theme = Theme.new()
    self.background = Background.new(self.parent)
    self.components = Components.new(self.theme, self.background)
    
    -- Tạo ScreenGui chính
    self.screenGui = Instance.new("ScreenGui")
    self.screenGui.Name = "GlassUI"
    self.screenGui.Parent = self.parent
    self.screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    
    return self
end

-- Tạo container chính với hiệu ứng glass
function GlassUI:createContainer(properties)
    properties = properties or {}
    
    local container = Instance.new("Frame")
    container.Name = properties.Name or "GlassContainer"
    container.Size = properties.Size or UDim2.new(0, 400, 0, 300)
    container.Position = properties.Position or UDim2.new(0.5, -200, 0.5, -150)
    container.BackgroundTransparency = 0.2
    container.BackgroundColor3 = self.theme.colors.glass
    container.BorderSizePixel = 0
    container.Parent = properties.Parent or self.screenGui
    
    -- Thêm corner radius
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, properties.CornerRadius or 12)
    corner.Parent = container
    
    -- Thêm stroke (viền)
    local stroke = Instance.new("UIStroke")
    stroke.Color = self.theme.colors.border
    stroke.Thickness = 1
    stroke.Transparency = 0.5
    stroke.Parent = container
    
    -- Thêm hiệu ứng blur
    self.background:addBlurEffect(container)
    
    return container
end

-- Tạo button với hiệu ứng glass
function GlassUI:createButton(properties)
    return self.components:createButton(properties)
end

-- Tạo text label
function GlassUI:createLabel(properties)
    return self.components:createLabel(properties)
end

-- Tạo text input
function GlassUI:createTextBox(properties)
    return self.components:createTextBox(properties)
end

-- Tạo slider
function GlassUI:createSlider(properties)
    return self.components:createSlider(properties)
end

-- Tạo toggle switch
function GlassUI:createToggle(properties)
    return self.components:createToggle(properties)
end

-- Tạo dropdown menu
function GlassUI:createDropdown(properties)
    return self.components:createDropdown(properties)
end

-- Tạo progress bar
function GlassUI:createProgressBar(properties)
    return self.components:createProgressBar(properties)
end

-- Hiển thị notification
function GlassUI:showNotification(title, message, duration)
    return self.components:createNotification(title, message, duration)
end

-- Cleanup function
function GlassUI:destroy()
    if self.screenGui then
        self.screenGui:Destroy()
    end
    if self.background then
        self.background:destroy()
    end
end

return GlassUI